pre-commit:
  parallel: true
  commands:
    format:
      files: git diff --name-only @{push}
      glob: "*.{lua}"
      run: stylua {files} && git add {files}
commit-msg:
  parallel: true
  commands:
    commitlint:
      run: npx --no-install commitlint --edit "$1"
post-commit:
  parallel: true
  commands:
    changelog:
      run: lefthook run changelog

changelog:
  piped: true
  commands:
    1_create:
      run: git-chglog -o CHANGELOG.md
    2_add:
      run: LEFTHOOK=0 git add CHANGELOG.md
    3_commit:
      run: LEFTHOOK=0 git commit --amend --no-edit
